<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Happyning</title>
	<script src="jquery-1.7.min.js"></script>
	<script src="json2.js"></script>
	<script src="underscore-min.js"></script>
	<script src="backbone-min.js"></script>
	<script src="jquery.tools.min.js"></script>
	<script src="jquery-ui/js/jquery-ui-1.8.16.custom.min.js"></script>
	<script src='data.js'></script>
	<script src='global.js'></script>
	<script src="date_da.js"></script>
	<script src="js/timeline.js"></script>
	<link rel="stylesheet" type="text/css" href="jquery-ui/css/ui-darkness/jquery-ui-1.8.16.custom.css"/>
	<link rel="stylesheet" type="text/css" href="happyning.css"/>
	<link rel="stylesheet" type="text/css" href="css/timeline.css"/>
	<link rel="stylesheet" type="text/css" href="css/box.css"/>
	<script src="star-rating/jquery.rating.js"></script>
	<link rel="stylesheet" type="text/css" href="star-rating/jquery.rating.css"/>

	<style>
		.headers div {
			color: #999;
			margin-left: 38px;
			font-weight: bold;
			width: 210px;
			float: left;
		}
		.headers div.last {
			width: 100px;
		}
	</style>

	<script type="text/javascript">
		$(function () {
			$("#date").datepicker($.datepicker.regional['da']);
			$(".tooltipped").tooltip({ effect: 'slide', position: 'bottom center'});
			var currentPage;
			function selectPage(pageID) {
				console.log("Changing to page: " + pageID);
				if (currentPage !== undefined) {
					currentPage.hide();
				}
				var page = $('#' + pageID);
				page.show();
				currentPage=page;
			}
			var AppRouter = Backbone.Router.extend({
				routes: {
					"": "homePage",
					"/selector": "selectorPage",
					'/waiting': 'waitingPage'
				},
				homePage: function () {
					selectPage('homePage');
				},
				selectorPage: function () {
					selectPage('selectorPage');

					$(function() {
						['Bowling', 'Rodeo tyr', 'Paintball'].forEach(function(name) {
							$('.activities').append(template('#template-box', {style:'activity', name:name}));						
						});

						['Indisk', 'Italiensk', 'Fransk', 'Tysk'].forEach(function(name) {
							$('.eatings').append(template('#template-box', {style:'eating', name:name}));						
						});

						['Bar', 'Natklub'].forEach(function(name) {
							$('.partys').append(template('#template-box', {style:'party', name:name}));						
						});

						['Rengøring', 'Bus', 'Catering'].forEach(function(name) {
							$('.misc').append(template('#template-box', {style:'transport', name:name}));			
						});
						
						timeline.init();
						timeline.update();
					});
				},
				waitingPage: function() {
					selectPage('waitingPage');
				
					$('#waiting-timeline').html($('#select-timeline').html());	

					var allBids = [
						{
							'category' : 'Bowling',
							'timeline': '16:00 - 19:30',
							'bids' : [
								{
									'name' : "Thai Super",
									'rating' : 4,
									'price' : "kr. 10.000",
									'url' : 'http://www.google.com',
								},
								{
									'name' : "Flyvefisken",
									'rating' : 3,
									'price' : "kr. 12.000",
									'url' : 'http://www.google.com',
								}
							]
						},
						{
							'category' : 'Eating',
							'timeline': '20:00 - 23:00',
							'bids' : [
								{
									'name' : "Go Cart Ballerup",
									'rating' : 4,
									'price' : "kr. 10.000",
									'url' : 'http://www.google.com',
								},
								{
									'name' : "Rodeo Bull",
									'rating' : 2,
									'price' : "kr. 12.000",
									'url' : 'http://www.google.com',
								}
							]
						},
						{
							'category' : 'Party',
							'timeline': '23:30 - 6:00',
							'bids' : [
								{
									'name' : "Go Cart Ballerup",
									'rating' : 4,
									'price' : "kr. 10.000",
									'url' : 'http://www.google.com',
								},
								{
									'name' : "Rodeo Bull",
									'rating' : 2,
									'price' : "kr. 12.000",
									'url' : 'http://www.google.com',
								}
							]
						}
					];

					allBids.forEach(function(cat) {
						$('#allBids').append(template('#bidTable', cat));
					});

//					$('#waiting-timeline .box').each(function(i, el) {
//						$(el).parent().css('top', parseInt($(el).parent().css('top')) - 150);
//					});
				}
			});
			// Initiate the router
			var app_router = new AppRouter;
			// Start Backbone history a neccesary step for bookmarkable URL's
			Backbone.history.start();

			$("#location_button").click(function() {
				// Show spinner...
				$("#location_button").html("<img src='spinner.gif' height=20 border=0 />");
				setTimeout(function() {
					$("#location_button").text("Get location");
					$("#autocomplete").attr("value", "Howitzvej 60 1., 2000 Frederiksberg");
				}, 2500);
			});

			$("input#autocomplete").autocomplete({
				source: [
					"Albertslund",
					"Østerbro",
					"Vesterbro",
					"København K",
					"Brønshøj",
					"Frederiskberg",
					"Lyngby"
				]
			});
			$("input#what").autocomplete({
				source: [
					"Birthday party",
					"Dinner party",
					"Tea party",
					"Christmas caroling party",
					"Reception",
					"Costume or fancy dress party",
					"Company party",
					"Surprise party",
					"Graduation party",
					"Housewarming party"
				]
			});
			SUPPLIERS.forEach(function(supplier) {
				$('#overview').append(template('#template-supplier', supplier));
			});

		});
	</script>
</head>
<body>
	<div id="container">
		<div class="innerContent">
			<header>
				<a  href="#"><img src="img/logo.png" class="logo" /></a>
				<p>Hello, Jacob!<a href="#"> (Sign out)</a></p>
			</header>
				<nav>
					<p>Plan an event: </p>
						<input class type="text" name="many" id="many"  value="Attends" onclick="if (this.value !='') {this.value = '';}" /> 
						<input type="text" name="what" id="what" value="What" onclick="if (this.value !='') {this.value = '';}" /> 
						<input type="date" id="date" name="when" value="When?" onclick="if (this.value !='') {this.value = '';}" /> 
						<input type="budget" id="budget" value="Budget?" name="budget"  onclick="if (this.value !='') {this.value = '';}"  /> 
						<label for="where"></label><input id="autocomplete" value="Where?" onclick="if (this.value !='') {this.value = '';}" /><a class="locationButton" href="#" id="location_button">Find me</a>
						<a href="#/selector" class="find" ><img src="img/find.png"></a>
				</nav>

			<div id="homePage" class="page">			
				<img src="img/main.png" />
				<div class="tools" >
					<span class="tooltipped">Vintage</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Rock star</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Nature</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Girl night</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Adventure</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Ecological</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Culinary trip</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Team bounding</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Noughty</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Toataly wired</span>
					<div class="tooltip"></div>
				</div>
				
			</div>
			
			<div id="selectorPage" class="page">
				<img src='img/main-cropped.png'>
				<div class="tools">
					<span class="tooltipped">Vintage</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Rock star</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Nature</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Girl night</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Adventure</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Ecological</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Culinary trip</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Team bounding</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Noughty</span>
					<div class="tooltip"></div>
					<span class="tooltipped">Toataly wired</span>
					<div class="tooltip"></div>
				</div>

				<script type='text/template' id='template-box'>
					<div class='dndable' draggable='true'>
						<div class='box {style}'>
							<div class='icon'></div>
							<div class='header'>{name}</div>
							<div style='clear:both'></div>
						</div>
					</div>
				</script>

				<div class="timeline" id='select-timeline'>
				<div class="timepickerDiv"></div>
				<div class="droparea ui-droppable">


				<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" style="position: relative; " class="ui-draggable ui-droppable ui-resizable"></meta><div id="draggable" class="ui-widget-content ui-draggable droppedItem ui-droppable ui-resizable" style="position: absolute; top: 337px; width: 144px; left: 163px; ">
					<div class="box activity">
						<div class="icon"></div>
						<div class="header">Bowling</div>
						<div style="clear:both"></div>
					</div>
				<div class="close">x</div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-w"></div></div><meta http-equiv="Content-Type" content="text/html;charset=UTF-8" style="position: relative; " class="ui-draggable ui-droppable ui-resizable"></meta><div id="draggable" class="ui-widget-content ui-draggable droppedItem ui-droppable ui-resizable" style="position: absolute; top: 337px; width: 160px; left: 493px; ">
					<div class="box eating">
						<div class="icon"></div>
						<div class="header">Indisk</div>
						<div style="clear:both"></div>
					</div>
				<div class="close">x</div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-w"></div></div><meta http-equiv="Content-Type" content="text/html;charset=UTF-8" style="position: relative; " class="ui-draggable ui-droppable ui-resizable"></meta><div id="draggable" class="ui-widget-content ui-draggable droppedItem ui-droppable ui-resizable" style="position: absolute; top: 337px; width: 122px; left: 713px; ">
					<div class="box party">
						<div class="icon"></div>
						<div class="header">Bar</div>
						<div style="clear:both"></div>
					</div>
				<div class="close">x</div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-w"></div></div></div>
				
				
				<div class="droparea ui-droppable">


				<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" style="position: relative; " class="ui-draggable ui-droppable ui-resizable"></meta><div id="draggable" class="ui-widget-content ui-draggable droppedItem ui-droppable ui-resizable" style="position: absolute; top: 399px; left: 295px; width: 439px; ">
					<div class="box transport">
						<div class="icon"></div>
						<div class="header">Bus</div>
						<div style="clear:both"></div>
					</div>
				<div class="close">x</div><div class="ui-resizable-handle ui-resizable-e"></div><div class="ui-resizable-handle ui-resizable-w"></div></div></div>


				<div class="timelineTime"></div>
			</div>
			
			<br>

			<div class='headers'>
				<div>
					Activities:
				</div>
				<div>
					Eating:
				</div>
				<div>
					Staff:
				</div>
				<div class='last'>
					Venues:
				</div>

			</div>

			<div style='clear:both'></div> 

			<div class='lst activities'></div>
			<div class='lst eatings'></div>
			<div class='lst partys'></div>
			<div class='lst misc'></div>

			<div style='clear:both; padding-top:50px'>
				<a style='margin-left:338px;' href='#/waiting'><img style='width:300px; margin:auto;' src='img/Button.MakeItHappen.png'></a>
			</div>
		<div>
		</div>

					</div>
					
					
		<div id="waitingPage" class="page">
			<img src='img/main-cropped.png'>
			<div class="tools">
				<span class="tooltipped">Vintage</span>
				<div class="tooltip"></div>
				<span class="tooltipped">Rock star</span>
				<div class="tooltip"></div>
				<span class="tooltipped">Nature</span>
				<div class="tooltip"></div>
				<span class="tooltipped">Girl night</span>
				<div class="tooltip"></div>
				<span class="tooltipped">Adventure</span>
				<div class="tooltip"></div>
				<span class="tooltipped">Ecological</span>
				<div class="tooltip"></div>
				<span class="tooltipped">Culinary trip</span>
				<div class="tooltip"></div>
				<span class="tooltipped">Team bounding</span>
				<div class="tooltip"></div>
				<span class="tooltipped">Noughty</span>
				<div class="tooltip"></div>
				<span class="tooltipped">Toataly wired</span>
				<div class="tooltip"></div>
			</div>
			<div id='waiting-timeline' class='timeline'></div>
			<script type="text/template" id="bidTable">
				<div class='bid-table'>
					<div class='bid-cat'>
						<div class='bid-name'>{category}</div>
						<div class='bid-time'>{timeline}</div>
					</div>
					<div class='bid-rating'>
					</div>
					<div class='bid-sups'>
					</div>
					<div class='bid-price'>
					</div>
				</div>
			</script>
			<script type="text/template" id="bidRow">
				<tr>
					<td>{name}</td>
					<td class="ratingTD">{rating}</td>
					<td>{price}</td>
					<td>
						<img style="border=0" src="toggleBid.png" class="expandImg" id="expandImg{bidID}" onclick="toggleBid({bidID})"></img>
					</td>
					<td>{accept}</td>
				</tr>
				<tr id="bidDetails{bidID}" class="bidDetails">
					<td colspan="5">Details for this bid</td>
				</tr>
			</script>
			<script type="text/template" id="ratingTemplate">
				<input name="{name}" type="radio" class="star"/>
				<input name="{name}" type="radio" class="star"/>
				<input name="{name}" type="radio" class="star"/>
				<input name="{name}" type="radio" class="star"/>
				<input name="{name}" type="radio" class="star"/>
			</script>
			<div id="allBids" id="innerContent"></div>

		</div>
						
		</div>
	</div>
</body>
</html>


